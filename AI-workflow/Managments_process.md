# Management Process (GitHub Projects Kanban)

## Зачем этот документ
Этот документ описывает **как мы управляем работой**:
- как устроен Kanban в GitHub Projects
- как заводить Epic и задачи (Issues)
- что обязательно должно быть в каждой задаче
- как связываем задачи с **Context Pack** (долгоживущая память)
- как агенты двигают работу по статусам

---

## Канбан-доска: статусы и правила

### Колонки (Status)
Рекомендуемые колонки в GitHub Projects (поле `Status`):
1. **Backlog** — идеи/сырой список (ещё не готово к работе)
2. **Ready** — хорошо описано, можно брать в работу
3. **In Progress** — выполняется (есть владелец/агент)
4. **In Review** — открыт PR, идёт ревью (обязательная стадия)
5. **Blocked** — заблокировано зависимостью/решением/внешним фактором
6. **Done** — смёрджено, критерии выполнены

> Минимально достаточно: Backlog / Ready / In Progress / In Review / Done.

### WIP-лимиты (чтобы не расползалось)
- На одного исполнителя (человек или агент) — **не более 1–2 задач в In Progress**.
- Если больше — сначала довести текущую до PR/Review.

### Источник правды
- **Project Board** — источник правды по статусам.
- Issue-текст и Context Pack — источник правды по требованиям и решениям.

---

## Типы карточек: Epic vs Task

### Epic (большая задача)
Epic — это Issue, которое описывает крупную цель/фичу и содержит:
- общую цель
- границы (scope / non-goals)
- high-level acceptance criteria
- список подзадач (Issues) + зависимости/параллельность
- ссылку на Epic Context Pack (опционально, но полезно)

Epic НЕ закрывается одним PR. Epic закрывается, когда закрыты все Task-issues.

### Task (единица работы)
Task — это Issue, которое:
- имеет 1 владельца (worker-агент или ты)
- приводит к 1 PR (обычно)
- имеет **обязательный Context Pack**
- имеет чёткий DoD (Definition of Done)

---

## Обязательное правило: Context Pack на каждую задачу

### Что это
**Context Pack** — один markdown-док в репозитории, связанный с Issue.
Он нужен для:
- долговременной памяти задачи
- стабильной автономности агентов
- предсказуемого ревью (DoD + тест-план)

### Где хранить
Рекомендуемая структура:
- `context-packs/`
  - `ISSUE-<номер>-<slug>.md`

Пример:
- `context-packs/ISSUE-123-auth-flow.md`

### Ссылка из Issue
В тексте Issue обязательно есть ссылка вида:
- `Context Pack: context-packs/ISSUE-123-auth-flow.md`

### Минимальный шаблон Context Pack
- Goal / Definition of Done (DoD)
- Архитектура / решение (коротко)
- Файлы / точки входа
- Тест-план
- Риски / долги
- Notes / Progress (по желанию)

---

## Как описывать Epic (шаблон)

### Epic Issue template
**Title:** `EPIC: <кратко>`  
**Body:**
- **Goal:** что должно появиться для пользователя/системы
- **Why:** зачем это делаем (коротко)
- **Scope:** что входит
- **Non-goals:** что точно не делаем
- **Acceptance Criteria (high-level):** 5–10 пунктов
- **Constraints:** тех/временные ограничения
- **Risks:** 2–5 пунктов
- **Plan:** (позже) список Task-issues + зависимости/параллельные группы
- **Links:** дизайн/доки/референсы

### Правило декомпозиции
Planner-агент должен разбить Epic на **8–15 задач**:
- каждая задача должна быть достаточно маленькой, чтобы её можно было довести до PR
- каждая задача должна иметь свой Context Pack

---

## Как описывать Task (Issue) — шаблон

**Title:** `<глагол + объект> (коротко)`  
Примеры:
- `Add login endpoint`
- `Implement portfolio table rendering`
- `Fix caching for quotes endpoint`

**Body (минимум):**
- **Context:** 2–5 строк (что и где)
- **Goal:** что именно нужно сделать
- **Definition of Done (DoD):** чеклист 5–12 пунктов
- **Out of scope:** что не делаем
- **Context Pack:** `context-packs/ISSUE-<n>-<slug>.md`
- **Test plan:** как проверить (ручное/авто)
- **Dependencies:** блокеры/предусловия (если есть)
- **Notes:** любые подсказки

### Пример DoD (типовой)
- [ ] Реализовано согласно Goal
- [ ] Добавлены/обновлены тесты (или обосновано почему нет)
- [ ] Не ломает существующий функционал
- [ ] Обновлены docs/комментарии при необходимости
- [ ] Context Pack обновлён итоговым решением и шагами проверки
- [ ] PR оформлен и привязан к Issue

---

## Маркировки (labels) — чтобы агентам было легче

Рекомендуемые label-группы:
- `type: epic | task | bug | chore`
- `area: frontend | backend | infra | docs`
- `prio: p0 | p1 | p2`
- `size: s | m | l` (примерно)
- `agent: planner | worker | reviewer` (опционально)
- `blocked` (если нужно дублировать статус)

> Смысл labels: помогать фильтровать и выдавать агентам “очередь задач”.

---

## Зависимости и параллельность

### Как отмечать зависимости
В Task issue добавляй:
- `Dependencies: #<issue>, #<issue>`

В Epic — держи раздел:
- **Dependency map:** какие задачи блокируют какие

### Как отмечать “можно параллельно”
Используй один из вариантов:
- label `parallel`
- или в Epic в плане группируй:
  - **Parallel group A:** #1 #2 #3
  - **Parallel group B:** #4 #5

---

## Жизненный цикл задачи (как она движется по Kanban)

### Backlog → Ready
Переводим в Ready только когда:
- есть понятный Goal
- есть DoD
- есть Context Pack (хотя бы скелет)
- понятно, как тестировать

### Ready → In Progress
Когда задачу берёт Worker:
- назначает себя (assignee)
- пишет короткий комментарий “беру в работу”
- убеждается, что Context Pack есть и актуален

### In Progress → In Review
Когда открыт PR:
- PR **связан с Issue** (в PR description: `Closes #<issue>` или `Refs #<issue>`)
- статус переводится в **In Review**
- Worker обновляет Context Pack “что сделано / как проверить”

### In Review → Done
Когда PR смёрджен:
- автоматом (GitHub Actions) переводим в Done
- или вручную (если автоматика ещё не включена)

### Blocked
Переводим в Blocked, если:
- нужна внешняя инфа/решение
- заблокировано другой задачей
- требуется согласование архитектуры

В Blocked обязательно:
- комментарий “почему” + что нужно, чтобы разблокировать

---

## Автоматизация статусов (обязательное правило системы)

Цель автоматики:
- **PR открыт → In Review**
- **PR merged → Done**

Реализация:
- GitHub Actions + GitHub Projects API (или простой агент-правила)

Даже если автоматика ещё не настроена:
- рабочее правило остаётся: PR = In Review, merge = Done.

---

## Ритуалы (минимальные)

### Daily / ad-hoc (быстро)
- проверить колонку **Blocked**
- снять блокеры
- убедиться, что In Progress не растёт бесконечно

### Weekly (10–20 минут)
- привести Backlog в порядок
- уточнить приоритеты
- закрыть/архивировать устаревшее
- убедиться, что Epic действительно разбит на задачи

---

## Быстрые “anti-patterns” (чего избегать)
- Задачи без DoD (“сделай красиво”)
- Задачи без Context Pack (память теряется, агенты буксуют)
- Одна задача = половина проекта (невозможно параллелить)
- In Progress неделями без PR (лучше дробить ещё)
- PR без связи с Issue (ломает автоматику и трекинг)
