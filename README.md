# StockInfo
<img src="https://github.com/user-attachments/assets/a7bf2c86-812f-49c2-b146-76015c8ff4d9" width="247" height="529">
<img src="https://github.com/user-attachments/assets/83691643-7bba-41fd-b8e6-47620efda205" width="247" height="529">

Веб-приложение, предназначенное для анализа и управления инвестициями на финансовых рынках. Оно предоставляет пользователям возможность следить за актуальными котировками ценных бумаг и валют, а также управлять виртуальным портфелем. Пользователи могут просматривать новости финансового рынка, получать обновления по ценам акций и валют, а также использовать виртуальный счет для покупки и продажи финансовых инструментов. Приложение поддерживает различные темы оформления, доступно на мобильных устройствах и обеспечивает удобный интерфейс для работы с финансовыми данными. Оно интегрируется с несколькими API для получения информации о котировках и курсах валют, а также использует облачные технологии для хранения данных и аутентификации пользователей.

[Ссылка на сайт](https://stock-info-theta.vercel.app) (Актуальная ссылка всегда находится в описании проекта).

#### Список всех API: 
1. Для получения данных об котировках акций используется [API Московской биржи](https://www.moex.com/a2193).
2. Для получения данных о текущих курсах валют используется сервис [CBR-XML-DAILY](https://www.cbr-xml-daily.ru/).
3. Для аутентификации, сохранении данных о пользователе и его виртуальном счете используется [Supabase](https://supabase.com/).

## Основные функции
- **Изменение темы**: Темная, светлая и системная темы интерфейса.
- **Просмотр новостей**: Актуальные новости и обновления Московской биржи (MOEX).
- **Актуальные цены**: Просмотр актуальных цен на акции, облигации и валюту.
- **Список финансовых инструментов**: Список торгующихся акций, облигаций и валют с возможностью поиска.
- **Детальная информация**: Подробные данные по каждому инструменту из списка.
- **Избранное**: Сохранение важных финансовых инструментов и новостей в избранное.
- **Виртуальный счет**: Возможность покупки и продажи финансовых инструментов с использованием виртуального счета.
- **Профиль пользователя**: Создание и редактирование профиля пользователя.
- **Доступность**: Поддержка скрин ридеров и управления с клавиатуры для обеспечения доступности для всех пользователей.
- **Поддержка PWA**: Частичная поддержка Progressive Web App (без офлайн режима).
- **Настройка веб-приложения**: Возможность включения и отключения визуальных эффектов приложения.

## Зависимости
- Typescript (5.5.4): типизированный расширенный набор JavaScript, который компилируется в простой JavaScript.
- React js (18.3.1): JavaScript-библиотека с открытым исходным кодом для разработки пользовательских интерфейсов.
- Next js (14.2.5): открытый JavaScript фреймворк, созданный поверх React.js для создания веб-приложений.
- Tailwind CSS (3.4.9): CSS-фреймворк с открытым исходным кодом.
- ShadCN UI: коллекция переиспользуемых компонентов, основанная на Radix UI.
- Framer Motion (11.3.21): библиотека для создания продвинутых react анимаций.
- Supabase js (2.45.1): JavaScript SDK для работы с Supabase.
- Chart js (4.4.3): библиотека для построения графиков.
- Color Thief (2.4.0): инструмент для извлечения цветовой палитры из изображений.
- React Hot Toast (2.4.1): легкая и настраиваемая библиотека, которая добавляет красивые уведомления.
- И более мелкие вспомогательные библиотеки.

## Локальный запуск
### Сначала необходимо создать проект на Supabase.

Для этого необходимо перейти на одноименный сайт (ссылка в списке api), зарегистрироваться и настроить проект.

После создаем базу данных. Она должна содержать 2 таблицы. Их наименования:
  - Transactions
  - UserMainData
  
  Структуру можно посмотреть по пути [`/src/types/supabase.types.ts`](src/types/supabase.types.ts) в типе `Database` в поле `public/Tables`.
Далее добавляем в проект на сайте Enums.
Их можно посмотреть по пути [`/src/types/supabase.types.ts`](src/types/supabase.types.ts) в типе `Database` в поле `public/Enums`.

В конце создаем/заменяем строку для генерации типов в `package.json -> scripts` на собственную.
```
 "generate:types": "npx supabase gen types typescript --project-id НАЗВАНИЕ_ПРОЕКТА --schema public > ./src/types/supabase.types.ts"
 ```
Подробнее можно узнать в документации supabase.
> [!WARNING]
> При изменении структуры базы данных необходимо заново сгенерировать типы. 
>
> Для лучше типизации после генерации рекомендуется заменить значения в полях 
> "favorites" - TFavoritesList[] | null, "purchases" - TPurchasesList[] | null и "created_at" на Date

### Клонируем репозиторий и создаем файл .env в корне проекта. В нем должно быть 4 поля:
```
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_KEY=

NEXT_PUBLIC_SITEURL=http://localhost:3000
```
Все поля можно найти в панели управлением проектом *Supabase* в разделе *settings -> API*.
Первые два поля базовые и необходимы для работы проекта, третье для полного доступа ко всему проекту с обходом политики RLS и **не должен попасть на клиент**. 
Он необходим, чтобы полностью переложить на серверную часть next js ответственность за работу с базой данных и админ. функциями supabase auth (такими как удаление пользователя).

### Далее идет установка всех зависимостей проекта.
   ```
   .\
   npm install
   # or
   yarn install
   # or
   pnpm install
   ```
### После установки зависимостей можно запускать проект.
   ```
   npm run dev
   # or
   yarn dev
   # or
   pnpm dev
   ```
### Если запуск произошел успешно, то перейдите по адресу http://localhost:3000 в браузере.
