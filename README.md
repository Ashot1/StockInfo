# StockInfo
![image](https://github.com/Ashot1/StockInfo/assets/44030386/3b1a89d1-1b7e-48c5-8d3b-f91851954908)
Проект, позволяющий просматривать актуальные котировки ценных бумаг, а так же покупать/продавать их с помощью виртуального счета.

[Ссылка на сайт](https://stock-info-theta.vercel.app) (Актуальная ссылка всегда находится в описании проекта).

#### Список всех api: 
- Для получения данных об котировках акций используется [API Московской биржи](https://www.moex.com/a2193).
- Для получения данных о текущих курсах валют используется сервис [CBR-XML-DAILY](https://www.cbr-xml-daily.ru/).
- Для аутентификации, сохранении данных о пользователе и его виртуальном счете используется [Supabase](https://supabase.com/).

## Основные функции
- Изменение темы (темная, светлая, системная)
- Просмотр новостей с Московской биржи (MOEX)
- Просмотр текущих цен на акции, облигации и валюту
- Список торгующихся акций, облигаций и валют с возможностью поиска
- Добавление элементов в избранное
- Просмотр полной информации о финансовых инструментах
- Возможность покупки и продажи с использованием виртуального счета
- Создание и редактирование профиля пользователя
- Доступность (поддержка скрин ридеров и управления с клавиатуры)
- Частичная поддержка PWA (без офлайн режима)
- Возможность настройки некоторых аспектов веб-приложения под свои нужды

## Зависимости
- Typescript (5.5.2): типизированный расширенный набор JavaScript, который компилируется в простой JavaScript.
- React (18.3.1): JavaScript-библиотека с открытым исходным кодом для разработки пользовательских интерфейсов.
- Next js (14.2.4): открытый JavaScript фреймворк, созданный поверх React.js для создания веб-приложений.
- Tailwind CSS (3.4.4): CSS-фреймворк с открытым исходным кодом.
- ShadCN UI: коллекция переиспользуемых компонентов, основанная на Radix UI.
- Framer Motion (11.2.12): библиотека для создания продвинутых react анимаций.
- Supabase js (2.43.4): JavaScript SDK для работы с Supabase.
- Chart js (4.4.3): библиотека для построения графиков.
- Color Thief (2.4.0): инструмент для извлечения цветовой палитры из изображений.
- И более мелкие вспомогательные библиотеки.

## Локальный запуск
1. ***Сначала необходимо создать проект на Supabase.***

   Для этого необходимо перейти на одноименный сайт (ссылка в списке api), зарегистрироваться и настроить проект.

   После создаем базу данных. Она должна содержать 2 таблицы. Их наименования:
     - Transactions
     - UserMainData
     
     Структуру можно посмотреть по пути [`/src/types/supabase.types.ts`](src/types/supabase.types.ts) в типе `Database` в поле `public/Tables`.
   Далее добавляем в проект на сайте Enums.
   Их можно посмотреть по пути [`/src/types/supabase.types.ts`](src/types/supabase.types.ts) в типе `Database` в поле `public/Enums`.

   В конце создаем/заменяем строку для генерации типов в `package.json -> scripts` на собственную.
   ```
    "generate:types": "npx supabase gen types typescript --project-id НАЗВАНИЕ_ПРОЕКТА --schema public > ./src/types/supabase.types.ts"
    ```
   Подробнее можно узнать в документации supabase.
> [!WARNING]
> При изменении структуры базы данных необходимо заново сгенерировать типы. 
>
> Для лучше типизации после генерации рекомендуется заменить значения в полях 
> "favorites" - TFavoritesList[] | null, "purchases" - TPurchasesList[] | null и "created_at" на Date

2. ***Клонируем репозиторий и создаем файл .env в корне проекта. В нем должно быть 4 поля:***
    ```
    NEXT_PUBLIC_SUPABASE_URL=
    NEXT_PUBLIC_SUPABASE_ANON_KEY=
    SUPABASE_SERVICE_KEY=
    
    NEXT_PUBLIC_SITEURL=http://localhost:3000 (или ваш url)
    ```
    Все поля можно найти в панели управлением проектом *Supabase* в разделе *settings -> API*.
    Первые два поля базовые и необходимы для работы проекта, третье для полного доступа ко всему проекту с обходом политики RLS и **не должен попасть на клиент**. 
    Он необходим, чтобы полностью переложить на серверную часть next js ответственность за работу с базой данных и админ. функциями supabase auth (такими как удаление пользователя).

3. ***Далее идет установка всех зависимостей проекта.***
```
.\
npm install
# or
yarn install
# or
pnpm install
```
4. ***После установки зависимостей можно запускать проект.***
```
npm run dev
# or
yarn dev
# or
pnpm dev
```

5. ***Если запуск произошел успешно, то перейдите по адресу http://localhost:3000 в браузере.***
